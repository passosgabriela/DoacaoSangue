<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Criar Conta de Usuário</title>
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

  <div class="container" style="max-width:500px;">
    <h1>Criar Conta de Usuário</h1>

    <label>Nome</label>
    <input id="nome" type="text">

    <label>Email</label>
    <input id="email" type="email">

    <label>Senha</label>
    <input id="senha" type="password">

    <label>Idade</label>
    <input id="idade" type="number">

    <label>Peso (kg)</label>
    <input id="peso" type="number">

    <label>Condições de Saúde</label>
    <textarea id="condicoes" placeholder="Ex: pressão alta, anemia..."></textarea>

    <label>Tipo Sanguíneo</label>
    <select id="tipo">
      <option value="">Selecione...</option>
      <option>O+</option><option>O-</option>
      <option>A+</option><option>A-</option>
      <option>B+</option><option>B-</option>
      <option>AB+</option><option>AB-</option>
    </select>

    <button onclick="cadastrar()">Criar Conta</button>
    <p id="msg"></p>

    <br>
    <a href="login_usuario.html">Já tenho conta</a>
  </div>

  <script type="module">
    import { apiPost } from './assets/js/api.js';

    async function cadastrar() {
      const body = {
        nome: document.getElementById("nome").value,
        email: document.getElementById("email").value,
        senha: document.getElementById("senha").value,
        idade: document.getElementById("idade").value,
        peso: document.getElementById("peso").value,
        condicoes_saude: document.getElementById("condicoes").value,
        tipo_sanguineo: document.getElementById("tipo").value
      };

      const res = await apiPost("/users/register", body);

      document.getElementById("msg").innerText =
        res.id ? "Usuário criado com sucesso!" : res.message;
    }

    window.cadastrar = cadastrar;
  </script>

</body>
</html>
